{"generator":"Code Snippets v2.13.3","date_created":"2020-01-14 12:00","snippets":[{"name":"Woocommerce Add Post Grad Field on Successful Checkout","scope":"global","code":"add_action('woocommerce_thankyou', 'add_postgrad_field', 10, 1);\nfunction add_postgrad_field( $order_id ) {\n\n    if ( ! $order_id )\n        return;\n\n    \/\/ Getting an instance of the order object\n    $order = wc_get_order( $order_id );\n\n    \/\/ iterating through each order items\n    foreach ( $order->get_items() as $item_id => $item ) {\n\t\t$product_id = $item['product_id'];\n\t\t\n\t\tif($product_id == 10582) {\n\t\t\t$userID = get_current_user_id();\n\t\t\t$user = get_user_by( 'ID', $userID );\n\t\t\tupdate_user_meta($user->id, 'post_grad_test', 'Yes');\n\t\t} else {\n\t\t\t$item_meta_data = $item->get_meta_data();\n\t\t\n\t\t\t$meta_data1 = $item->get_meta('Postgraduate Diploma In Orthodontics ($5,000.00)');\n\n\t\t\tif( ! empty( $meta_data1 ) ) {\n\t\t\t\t$userID = get_current_user_id();\n\t\t\t\t$user = get_user_by( 'ID', $userID );\n\t\t\t\tupdate_user_meta($user->id, 'post_grad_test', 'Yes');\n\t\t\t}\t\n\t\t}\n    }\n}","priority":"10"}]}